#summary Gmock VS EasyMock


= Basic Usages =

=== EasyMock ===
{{{
List mock = createMock(List.class);

expect(mock.get(0)).andReturn("one");
expect(mock.get(1)).andStubReturn("two");
mock.clear();
expectLastCall().andThrow(new RuntimeException());

replay(mock);

someCodeThatInteractsWithMock(mock);

verify(mock);
}}}

=== Gmock ===
{{{
def mock = mock(List)

mock.get(0).returns('one')
mock.get(1).returns('two').stub()
mock.clear().throws(RuntimeException)

play {
  someCodeThatInteractsWithMock(mock)
}
}}}
Or even shorter:
{{{
def mock = mock(List) {
  get(0).returns('one')
  get(1).returns('two').stub()
  clear().throws(RuntimeException)
}

play {
  someCodeThatInteractsWithMock(mock)
}
}}}


= Order Checking =

=== EasyMock ===
{{{
Control control = createStrictControl();

List one = control.createMock(List.class);
List two = control.createMock(List.class);

expect(one.add("one")).andReturn(true);
expect(two.add("two")).andReturn(true);

control.replay();

someCodeThatInteractsWithMocks(one, two);

control.verify();
}}}

=== Gmock ===
{{{
def one = mock(List)
def two = mock(List)

ordered {
  one.add("one").returns(true)
  two.add("two").returns(true)
}

play {
  someCodeThatInteractsWithMocks(one, two)
}
}}}


= Times Verification and Argument Matchers =

=== EasyMock ===
{{{
List mock = createMock(List.class);

mock.clear();
expectLastCall().times(3);

expect(mock.add(anyObject())).andReturn(true).atLeastOnce();

someCodeThatInteractsWithMock(mock);

replay(mock);
}}}

=== Gmock ===
{{{
def mock = mock(List)

mock.clear().times(3)
mock.add(anything()).returns(true).atLeastOnce()

play {
  someCodeThatInteractsWithMock(mock)
}
}}}